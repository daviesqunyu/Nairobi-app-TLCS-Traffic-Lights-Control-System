<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nairobi TLCS - Traffic Control System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 25px;
        }

        h1 {
            color: #2d3748;
            font-size: 28px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            background: #48bb78;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        nav {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 500;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f7fafc 100%);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #667eea;
            transition: transform 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        }

        .stat-card h3 {
            color: #4a5568;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #718096;
        }

        .map-container {
            background: #e2e8f0;
            height: 400px;
            border-radius: 12px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
            border: 2px solid #cbd5e0;
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            height: 100%;
            gap: 2px;
            padding: 10px;
        }

        .intersection {
            background: #fff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s;
        }

        .intersection:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .traffic-light {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .red { background: #f56565; }
        .yellow { background: #ecc94b; }
        .green { background: #48bb78; }

        .intersection-label {
            position: absolute;
            bottom: 5px;
            font-size: 10px;
            color: #4a5568;
            font-weight: bold;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(72, 187, 120, 0.3);
        }

        .control-btn.danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        }

        .control-btn.warning {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
        }

        .alert {
            background: #fed7d7;
            border-left: 4px solid #f56565;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            color: #742a2a;
        }

        .alert.warning {
            background: #feebc8;
            border-left-color: #ed8936;
            color: #7c2d12;
        }

        .alert.info {
            background: #bee3f8;
            border-left-color: #4299e1;
            color: #2c5282;
        }

        .traffic-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .traffic-table th,
        .traffic-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .traffic-table th {
            background: #f7fafc;
            font-weight: 600;
            color: #4a5568;
        }

        .traffic-table tr:hover {
            background: #f7fafc;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge.high {
            background: #fed7d7;
            color: #c53030;
        }

        .badge.medium {
            background: #feebc8;
            color: #c05621;
        }

        .badge.low {
            background: #c6f6d5;
            color: #276749;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            nav {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>
                <span class="status-indicator"></span>
                Nairobi TLCS - Traffic Light Control System
            </h1>
            <nav>
                <button class="nav-btn active" onclick="showPage('home')">Home</button>
                <button class="nav-btn" onclick="showPage('data')">Numeric Data & Map</button>
                <button class="nav-btn" onclick="showPage('simulation')">Simulation Control</button>
                <button class="nav-btn" onclick="showPage('admin')">Admin Dashboard</button>
            </nav>
        </header>

        <div class="content">
            <!-- Home Page -->
            <div id="home" class="page active">
                <h2 style="margin-bottom: 20px; color: #2d3748;">Nairobi CBD Traffic Monitor</h2>
                
                <div class="dashboard">
                    <div class="stat-card">
                        <h3>Vehicles on Road</h3>
                        <div class="stat-value" id="vehicles">0</div>
                        <div class="stat-label">Currently Active</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>Pedestrians</h3>
                        <div class="stat-value" id="pedestrians">0</div>
                        <div class="stat-label">Walking</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>Heavy Traffic Areas</h3>
                        <div class="stat-value" id="heavyTraffic">0</div>
                        <div class="stat-label">Intersections</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>Average Speed</h3>
                        <div class="stat-value" id="avgSpeed">0</div>
                        <div class="stat-label">km/h</div>
                    </div>
                </div>

                <div class="dashboard">
                    <div class="stat-card">
                        <h3>Weather Condition</h3>
                        <div class="stat-value" style="font-size: 24px;" id="weather">‚òÄÔ∏è Clear</div>
                        <div class="stat-label">Current</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>Road Condition</h3>
                        <div class="stat-value" style="font-size: 24px;" id="roadCondition">‚úì Good</div>
                        <div class="stat-label">Overall Status</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>Speed Limit</h3>
                        <div class="stat-value" id="speedLimit">50</div>
                        <div class="stat-label">km/h CBD Area</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>System Status</h3>
                        <div class="stat-value" style="font-size: 24px; color: #48bb78;">‚óè Online</div>
                        <div class="stat-label">All Systems Operational</div>
                    </div>
                </div>

                <div class="alert info">
                    <strong>üìä System Info:</strong> Real-time monitoring of Nairobi CBD traffic. Data updates every 3 seconds.
                </div>
            </div>

            <!-- Data & Map Page -->
            <div id="data" class="page">
                <h2 style="margin-bottom: 20px; color: #2d3748;">Traffic Map & Analytics</h2>
                
                <div class="map-container">
                    <div class="map-grid" id="mapGrid"></div>
                </div>

                <table class="traffic-table">
                    <thead>
                        <tr>
                            <th>Intersection</th>
                            <th>Traffic Level</th>
                            <th>Vehicles</th>
                            <th>Wait Time</th>
                            <th>Light Status</th>
                        </tr>
                    </thead>
                    <tbody id="trafficTableBody"></tbody>
                </table>
            </div>

            <!-- Simulation Control Page -->
            <div id="simulation" class="page">
                <h2 style="margin-bottom: 20px; color: #2d3748;">Traffic Simulation Controls</h2>
                
                <div class="controls">
                    <button class="control-btn" onclick="startSimulation()">‚ñ∂Ô∏è Start Simulation</button>
                    <button class="control-btn warning" onclick="pauseSimulation()">‚è∏Ô∏è Pause</button>
                    <button class="control-btn danger" onclick="stopSimulation()">‚èπÔ∏è Stop</button>
                    <button class="control-btn" onclick="optimizeTraffic()">‚ö° Optimize All</button>
                </div>

                <div class="alert warning" style="margin-top: 20px;">
                    <strong>‚ö†Ô∏è Notice:</strong> Simulation controls affect real-time traffic light timing. Use with caution.
                </div>

                <div style="margin-top: 30px;">
                    <h3 style="color: #2d3748; margin-bottom: 15px;">Quick Actions</h3>
                    <div class="controls">
                        <button class="control-btn" onclick="rushHourMode()">üöó Rush Hour Mode</button>
                        <button class="control-btn" onclick="nightMode()">üåô Night Mode</button>
                        <button class="control-btn" onclick="emergencyMode()">üö® Emergency Clear</button>
                        <button class="control-btn" onclick="resetAll()">üîÑ Reset All Lights</button>
                    </div>
                </div>

                <div id="simulationStatus" class="alert info" style="margin-top: 20px; display: none;">
                    <strong>Status:</strong> <span id="simStatusText"></span>
                </div>
            </div>

            <!-- Admin Dashboard Page -->
            <div id="admin" class="page">
                <h2 style="margin-bottom: 20px; color: #2d3748;">Administrator Dashboard</h2>
                
                <div class="dashboard">
                    <div class="stat-card">
                        <h3>Total Intersections</h3>
                        <div class="stat-value">16</div>
                        <div class="stat-label">Monitored</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>System Uptime</h3>
                        <div class="stat-value">99.8%</div>
                        <div class="stat-label">Last 30 Days</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>Active Cameras</h3>
                        <div class="stat-value">64</div>
                        <div class="stat-label">Operational</div>
                    </div>
                    
                    <div class="stat-card">
                        <h3>Alerts Today</h3>
                        <div class="stat-value" id="alertsToday">0</div>
                        <div class="stat-label">Resolved</div>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <h3 style="color: #2d3748; margin-bottom: 15px;">System Configuration</h3>
                    <div class="controls">
                        <button class="control-btn">‚öôÔ∏è Light Timing</button>
                        <button class="control-btn">üìä View Reports</button>
                        <button class="control-btn">üîß Maintenance</button>
                        <button class="control-btn">üë• User Management</button>
                    </div>
                </div>

                <div class="alert info" style="margin-top: 20px;">
                    <strong>üîê Admin Access:</strong> You have full control over the Nairobi TLCS system.
                </div>
            </div>
        </div>
    </div>

    <script>
        // State management
        let simulationRunning = false;
        let updateInterval = null;
        const intersections = [];
        const roads = ['Kenyatta Ave', 'Moi Ave', 'Uhuru Hwy', 'Haile Selassie Ave', 
                       'Tom Mboya St', 'Ronald Ngala St', 'River Rd', 'Kimathi St',
                       'University Way', 'Muindi Mbingu St', 'Mama Ngina St', 'Parliament Rd',
                       'Harambee Ave', 'City Hall Way', 'Wabera St', 'Standard St'];

        // Initialize intersections
        function initIntersections() {
            for (let i = 0; i < 16; i++) {
                intersections.push({
                    id: i + 1,
                    name: roads[i],
                    light: ['red', 'yellow', 'green'][Math.floor(Math.random() * 3)],
                    vehicles: Math.floor(Math.random() * 50) + 10,
                    trafficLevel: ['Low', 'Medium', 'High'][Math.floor(Math.random() * 3)],
                    waitTime: Math.floor(Math.random() * 120) + 30
                });
            }
        }

        // Update stats
        function updateStats() {
            const vehicles = Math.floor(Math.random() * 1000) + 2500;
            const pedestrians = Math.floor(Math.random() * 500) + 800;
            const heavyTraffic = intersections.filter(i => i.trafficLevel === 'High').length;
            const avgSpeed = Math.floor(Math.random() * 20) + 25;

            document.getElementById('vehicles').textContent = vehicles;
            document.getElementById('pedestrians').textContent = pedestrians;
            document.getElementById('heavyTraffic').textContent = heavyTraffic;
            document.getElementById('avgSpeed').textContent = avgSpeed;
            document.getElementById('alertsToday').textContent = Math.floor(Math.random() * 20) + 5;

            // Update weather randomly
            const weatherConditions = ['‚òÄÔ∏è Clear', 'üå§Ô∏è Partly Cloudy', '‚òÅÔ∏è Cloudy', 'üåßÔ∏è Rainy'];
            if (Math.random() > 0.9) {
                document.getElementById('weather').textContent = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
            }
        }

        // Render map
        function renderMap() {
            const mapGrid = document.getElementById('mapGrid');
            mapGrid.innerHTML = '';
            
            intersections.forEach((intersection, index) => {
                const div = document.createElement('div');
                div.className = 'intersection';
                div.innerHTML = `
                    <div class="traffic-light ${intersection.light}"></div>
                    <span class="intersection-label">${intersection.name.split(' ')[0]}</span>
                `;
                div.onclick = () => toggleLight(index);
                mapGrid.appendChild(div);
            });

            updateTrafficTable();
        }

        // Update traffic table
        function updateTrafficTable() {
            const tbody = document.getElementById('trafficTableBody');
            tbody.innerHTML = '';
            
            intersections.forEach(intersection => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td><strong>${intersection.name}</strong></td>
                    <td><span class="badge ${intersection.trafficLevel.toLowerCase()}">${intersection.trafficLevel}</span></td>
                    <td>${intersection.vehicles} vehicles</td>
                    <td>${intersection.waitTime}s</td>
                    <td><span class="traffic-light ${intersection.light}" style="display: inline-block; width: 16px; height: 16px; margin-right: 5px;"></span>${intersection.light.toUpperCase()}</td>
                `;
            });
        }

        // Toggle traffic light
        function toggleLight(index) {
            const lights = ['red', 'yellow', 'green'];
            const currentIndex = lights.indexOf(intersections[index].light);
            intersections[index].light = lights[(currentIndex + 1) % 3];
            renderMap();
        }

        // Simulation cycle
        function simulationCycle() {
            intersections.forEach(intersection => {
                // Randomly change traffic lights
                if (Math.random() > 0.7) {
                    const lights = ['red', 'yellow', 'green'];
                    intersection.light = lights[Math.floor(Math.random() * 3)];
                }
                
                // Update traffic data
                intersection.vehicles = Math.floor(Math.random() * 50) + 10;
                intersection.trafficLevel = ['Low', 'Medium', 'High'][Math.floor(Math.random() * 3)];
                intersection.waitTime = Math.floor(Math.random() * 120) + 30;
            });
            
            renderMap();
            updateStats();
        }

        // Control functions
        function startSimulation() {
            if (!simulationRunning) {
                simulationRunning = true;
                updateInterval = setInterval(simulationCycle, 3000);
                showStatus('Simulation started successfully ‚úì', 'info');
            }
        }

        function pauseSimulation() {
            if (simulationRunning) {
                clearInterval(updateInterval);
                simulationRunning = false;
                showStatus('Simulation paused', 'warning');
            }
        }

        function stopSimulation() {
            clearInterval(updateInterval);
            simulationRunning = false;
            showStatus('Simulation stopped', 'danger');
        }

        function optimizeTraffic() {
            intersections.forEach(intersection => {
                if (intersection.trafficLevel === 'High') {
                    intersection.light = 'green';
                } else {
                    intersection.light = 'red';
                }
            });
            renderMap();
            showStatus('Traffic flow optimized for all intersections ‚ö°', 'info');
        }

        function rushHourMode() {
            intersections.forEach(intersection => {
                intersection.trafficLevel = 'High';
                intersection.vehicles = Math.floor(Math.random() * 30) + 40;
            });
            renderMap();
            showStatus('Rush hour mode activated üöó', 'warning');
        }

        function nightMode() {
            intersections.forEach(intersection => {
                intersection.trafficLevel = 'Low';
                intersection.vehicles = Math.floor(Math.random() * 15) + 5;
                intersection.light = 'yellow';
            });
            renderMap();
            showStatus('Night mode activated üåô', 'info');
        }

        function emergencyMode() {
            intersections.forEach(intersection => {
                intersection.light = 'green';
            });
            renderMap();
            showStatus('Emergency clear mode - All lights green üö®', 'danger');
        }

        function resetAll() {
            intersections.forEach(intersection => {
                intersection.light = 'red';
                intersection.trafficLevel = 'Medium';
                intersection.vehicles = Math.floor(Math.random() * 30) + 15;
            });
            renderMap();
            showStatus('All traffic lights reset to default üîÑ', 'info');
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('simulationStatus');
            const statusText = document.getElementById('simStatusText');
            statusDiv.className = `alert ${type}`;
            statusText.textContent = message;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }

        // Page navigation
        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(pageName).classList.add('active');
            event.target.classList.add('active');
        }

        // Initialize
        initIntersections();
        renderMap();
        updateStats();
        
        // Auto-update stats
        setInterval(updateStats, 3000);
        
        // Auto simulation
        startSimulation();
    </script>
</body>
</html>
